from django.test import TestCase
from api.models import fuzzy_date_year

# A representative sample of the kind of things in the 'date' entries
# in my mother's genealogy database...
years = [
    (" 6 JAN 2017", 2017),
    ("06 FEB 2003", 2003),
    ("27 MAR 1959", 1959),
    ("25 APR 2019", 2019),
    ("19 MAY 1876", 1876),
    ("28 JUN 1951", 1951),
    ("23 JUL 1922", 1922),
    ("11 AUG 1952", 1952),
    ("06 SEP 1953", 1953),
    ("09 OCT 1982", 1982),
    ("23 NOV 1985", 1985),
    ("05 DEC 1920", 1920),
    ("26OR29-AUG-1958", 1958),
    ("30-DECEMBER-2017", 2017),
    ("ABT 1918", 1918),
    ("abt 1931", 1931),
    ("AUG 1945", 1945),
    ("CHRISTENED 1922", 1922),
    ("1965", 1965),
    ("C1922", 1922),
    ("CHRISTENED 1922", 1922),
    ("ABT 23 APR 1989", 1989),
    ("abt 1884", 1884),
    ("1905", 1905),
    ("MAR 1988", 1988),
    ("ABT 1868", 1868),
    ("Abt 1868", 1868),
    ("ABT /--/1854", 1854),
    ("01 MAY 1932", 1932),
    ("03 MAY 1932", 1932),
    (" 6 FEB 2003", 2003),
    ("1 MAR 1875", 1875),
    ("1970", 1970),
    ("Abt 1842", 1842),
    ("LIVED", None),
    ("ABT 1866", 1866),
    ("C1876", 1876),
    ("02-MAY/AUG-1842", 1842),
    ("03-1977", 1977),
    ("032075 2NZEFIP", None),
    ("04 SEP 19??", None),
    ("04 SEP 19??", None),
    ("04OR05-NOV-1975", 1975),
    ("06OR07-1994", 1994),
    ("08-08-1912", 1912),
    ("09OR04-DEC-1933", 1933),
    ("1 FEBRUARY 1978", 1978),
    ("12 DECEMBER 1928", 1928),
    ("12-02-1955", 1955),
    ("12OR21JUN1861", 1861),
    ("17 JANUARY 1966", 1966),
    ("17 SEPTEMBER 1915", 1915),
    ("17 SEPTEMBER 2018", 2018),
    ("1792", 1792),
    ("1795", 1795),
    ("1797", 1797),
    ("17OR18-JAN-1941", 1941),
    ("18 FEBRUARY 2006", 2006),
    ("18 JUNE 1946", 1946),
    ("18 MARCH 1940", 1940),
    ("1838 OR9", 1838),
    ("18535 2NZEF IP", None),
    ("1896OR7", 1896),
    ("1897", 1897),
    ("19 APRIL 2009", 2009),
    ("19 DECEMBER 1976", 1976),
    ("1941/2", 1941),
    ("1944?", 1944),
    ("1958/9", 1958),
    ("1STNZEF", None),
    ("2008", 2008),
    ("2010", 2010),
    ("2013", 2013),
    ("2015", 2015),
    ("21 MAY ABT62", None),
    ("21 MAY ABT1962", 1962),
    ("22 AUGUST 2015", 2015),
    ("23 APRIL 2017", 2017),
    ("23 SEPTEMBER 1959", 1959),
    ("24 FEBRUARY 1949", 1949),
    ("24 JUNE 1948", 1948),
    ("24 MAY ????", None),
    ("27 MARCH 1940", 1940),
    ("27 NOVEMBER 1954", 1954),
    ("29 MAR ?14OR18", None),
    ("3 FEBRUARY 2012", 2012),
    ("3 JANUARY 2017", 2017),
    ("30 APRIL 1951", 1951),
    ("30 DECEMBER 1985", 1985),
    ("4 DECEMBER 2015", 2015),
    ("4 FEBRUARY 1988", 1988),
    ("4 OCTOBER 2014", 2014),
    ("4 SEPTEMBER 1979", 1979),
    ("403730 2 NZEFME", None),
    ("45 ___ -46?", None),
    ("50292 2NZEF IP", None),
    ("50712 CMR INZEF", None),
    ("6 DECEMBER 1986", 1986),
    ("6 MARCH 2015", 2015),
    ("6/8 APRIL 1864", 1864),
    ("7-MAYOR5/7/1987", 1987),
    ("9OR10JUNE1948?9", 1948),
    ("abt 1809", 1809),
    ("ABT 1867", 1867),
    ("ABT 1886", 1886),
    ("abt 1894", 1894),
    ("ABT 1896", 1896),
    ("abt 1912", 1912),
    ("abt 1917", 1917),
    ("abt JUL 1871", 1871),
    ("ABT1929", 1929),
    ("ADOPTED", None),
    ("AGED 17 YEARS", None),
    ("ALIVE 1737", 1737),
    ("APRIL 2014", 2014),
    ("APRIL/MAY 1993", 1993),
    ("AT BIRTH", None),
    ("BEF 1890", 1890),
    ("BEF 1934", 1934),
    ("BY 1869", 1869),
    ("C.1872", 1872),
    ("C.1906", 1906),
    ("C1827", 1827),
    ("C1867-9", 1867),
    ("CAME TO NZ", None),
    ("CREMATED", None),
    ("CSEP-1952", 1952),
    ("DE FACTO", None),
    ("DEC 19??", None),
    ("DECEASE OF FORM", None),
    ("DECEASED", None),
    ("DECEMBER 1942", 1942),
    ("DIVORCED", None),
    ("f", None),
    ("FORMER MARRIAGE", None),
    ("JAN 19??", None),
    ("KIA WW11", None),
    ("MAR1874OR22-10-", 1874),
    ("MAY 19", None),
    ("SEP 1805", 1805),
    ("SEPT 1897", 1897),
    ("SEPTEMBER 1952", 1952),
    ("SEPTEMBER 1957", 1957),
    ("SEX UNKNOWN", None),
    ("STEP-DAUGHTER", None),
    ("TRIPLET", None),
    ("TWIN", None),
    ("YOUNG", None),
]


class FuzzyDateTests(TestCase):
    def test_year(self):
        for value, expected_year in years:
            year = fuzzy_date_year(value)
            self.assertEqual(year, expected_year)